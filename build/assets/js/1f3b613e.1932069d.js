"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3730],{2283:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var t=i(4848),s=i(8453);const r={sidebar_position:1},l="Run Backtest",o={id:"menu-options/run-backtest",title:"Run Backtest",description:"How to run a backtest",source:"@site/docs/menu-options/run-backtest.md",sourceDirName:"menu-options",slug:"/menu-options/run-backtest",permalink:"/docs/menu-options/run-backtest",draft:!1,unlisted:!1,editUrl:"https://github.com/dvconsultores/MockbaManual/tree/main/docs/menu-options/run-backtest.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Menu - Options",permalink:"/docs/category/menu---options"},next:{title:"Reset Trader",permalink:"/docs/menu-options/reset-trader"}},a={},d=[{value:"Backtesting",id:"backtesting",level:3},{value:"Technical Indicators",id:"technical-indicators",level:3},{value:"How to start the backtest",id:"how-to-start-the-backtest",level:3},{value:"Explanation of Columns in the Generated Excel",id:"explanation-of-columns-in-the-generated-excel",level:2},{value:"1. timestamp",id:"1-timestamp",level:3},{value:"2. low",id:"2-low",level:3},{value:"3. high",id:"3-high",level:3},{value:"4. volume",id:"4-volume",level:3},{value:"5. close",id:"5-close",level:3},{value:"6. return",id:"6-return",level:3},{value:"7. rsi",id:"7-rsi",level:3},{value:"8. macd",id:"8-macd",level:3},{value:"9. macd_signal",id:"9-macd_signal",level:3},{value:"10. macd_diff",id:"10-macd_diff",level:3},{value:"11. bollinger_hband",id:"11-bollinger_hband",level:3},{value:"12. bollinger_mavg",id:"12-bollinger_mavg",level:3},{value:"13. bollinger_lband",id:"13-bollinger_lband",level:3},{value:"14. ema",id:"14-ema",level:3},{value:"15. predicted",id:"15-predicted",level:3},{value:"16. strategy_return",id:"16-strategy_return",level:3},{value:"17. cumulative_strategy_return",id:"17-cumulative_strategy_return",level:3},{value:"18. cumulative_market_return",id:"18-cumulative_market_return",level:3},{value:"19. strategy_portfolio_value",id:"19-strategy_portfolio_value",level:3},{value:"20. market_portfolio_value",id:"20-market_portfolio_value",level:3},{value:"21. strategy_crypto_amount",id:"21-strategy_crypto_amount",level:3},{value:"22. market_crypto_amount",id:"22-market_crypto_amount",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"run-backtest",children:"Run Backtest"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"How to run a backtest",src:i(3872).A+"",width:"208",height:"425"})}),"\n",(0,t.jsx)(n.h3,{id:"backtesting",children:"Backtesting"}),"\n",(0,t.jsx)(n.p,{children:"The strategy is backtested using the model's predictions, an initial investment, and a stop-loss mechanism to manage risk. The backtest simulates trading over historical data to evaluate the strategy's performance."}),"\n",(0,t.jsx)(n.h3,{id:"technical-indicators",children:"Technical Indicators"}),"\n",(0,t.jsxs)(n.p,{children:["It calculates various technical indicators (e.g., RSI, MACD, Bollinger Bands, EMA) to capture different aspects of market movements. The indicators are calculated using the ",(0,t.jsx)(n.code,{children:"pandas_ta"})," library to enrich the historical data with additional insights."]}),"\n",(0,t.jsx)(n.h3,{id:"how-to-start-the-backtest",children:"How to start the backtest"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Click on Run Backtest menu option"}),"\n",(0,t.jsx)(n.li,{children:"Select the symbol (e.g., BTCUSDT). Currently, it is trading against Binance. If the symbol is not listed, a message will be displayed."}),"\n",(0,t.jsx)(n.li,{children:"The bot will ask for a timeframe, presenting three option buttons: 1h, 4h, and 1d. If the selected range is invalid, a message will be displayed."}),"\n",(0,t.jsx)(n.li,{children:"You need to enter your initial date, end date, capital, gain threshold, and stop-loss threshold using the format: (yyyy-mm-dd), e.g., 2023-05-01|2023-05-02|100|1|5. Use the pipe character (|) as a separator. If the selected range is invalid, a message will be displayed.\nThe gain threshold is the percentage you want to earn for each trade. The bot already calculates the taker (0.1%) and maker (0.1%) fees over this value. For example, a gain threshold of 0.1 means 0.1%. Lowering the gain threshold and increasing the stop-loss percentage will increase the number of trades.\nThe stop-loss percentage, for example, 50, means 50%."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"After these steps, the bot will start executing the backtesting process. It will download the historical data and begin using the machine learning model. If the model does not exist, it will start training from scratch, which may take a bit longer. Once finished, it will display a text indicating a comparison between the strategy and a hold token. Additionally, it will generate an Excel file and a chart comparing both strategies."}),"\n",(0,t.jsx)(n.p,{children:"Result example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Initial crypto amount (with initial investment): 0.002362 BTC\nFinal strategy portfolio value: $237.99\nFinal market portfolio value: $147.33\nFinal amount of BTCUSDT: 0.003682\nFinal percentage gain/loss: 137.99%\nAverage monthly percentage gain/loss: 17.25%\nYou have selected a gain threshold of 1.00% and a stop-loss threshold of 8.00%.\nExecution time: 0:00:04.435913\n"})}),"\n",(0,t.jsx)(n.p,{children:"In the example above, we ran the backtest from 2024-01-01 to 2024-08-01 with a 4-hour timeframe, a $100 investment, a 1% gain threshold, and an 8% stop-loss."}),"\n",(0,t.jsx)(n.h1,{id:"backtest-results-columns-explanation",children:"Backtest Results Columns Explanation"}),"\n",(0,t.jsx)(n.h2,{id:"explanation-of-columns-in-the-generated-excel",children:"Explanation of Columns in the Generated Excel"}),"\n",(0,t.jsx)(n.h3,{id:"1-timestamp",children:"1. timestamp"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": This column contains the date and time for each data point."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": It provides the time reference for each row of data, aligning price movements and technical indicators with specific periods."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-low",children:"2. low"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The lowest price of the asset within the given time frame."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Used to calculate various technical indicators and to understand the range of price movements within the period."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-high",children:"3. high"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The highest price of the asset within the given time frame."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Similar to the low price, it is used for technical indicators and understanding the price range."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"4-volume",children:"4. volume"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The total volume of the asset traded during the time frame."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Volume is a key indicator of market activity and is often used in conjunction with price movements to confirm trends."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"5-close",children:"5. close"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The closing price of the asset at the end of the time frame."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": It is the most commonly used price for calculations and is critical for generating other technical indicators."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"6-return",children:"6. return"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The percentage change in the closing price from one period to the next."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": (Current Close Price - Previous Close Price) / Previous Close Price"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Indicates the relative price change, helping to measure the performance of the asset over time."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"7-rsi",children:"7. rsi"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The Relative Strength Index, a momentum oscillator that measures the speed and change of price movements."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": Based on average gains and losses over a specified period."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Used to identify overbought or oversold conditions."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"8-macd",children:"8. macd"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The Moving Average Convergence Divergence, a trend-following momentum indicator."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": Difference between a short-term EMA and a long-term EMA."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Helps to identify changes in the strength, direction, momentum, and duration of a trend."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"9-macd_signal",children:"9. macd_signal"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The signal line for the MACD."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": EMA of the MACD line."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Used to generate buy and sell signals."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"10-macd_diff",children:"10. macd_diff"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The difference between the MACD line and the signal line."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": MACD - MACD Signal"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Helps to identify the strength of a trend."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"11-bollinger_hband",children:"11. bollinger_hband"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The upper Bollinger Band."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": A specified number of standard deviations above a moving average."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Indicates potential overbought conditions when price touches or exceeds this band."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"12-bollinger_mavg",children:"12. bollinger_mavg"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The middle Bollinger Band, which is a moving average."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": Typically a 20-period simple moving average."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Used as a baseline to calculate the upper and lower bands."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"13-bollinger_lband",children:"13. bollinger_lband"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The lower Bollinger Band."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": A specified number of standard deviations below a moving average."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Indicates potential oversold conditions when price touches or falls below this band."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"14-ema",children:"14. ema"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The Exponential Moving Average, which gives more weight to recent prices."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": Weighted moving average of the closing prices."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Used to identify the trend direction."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"15-predicted",children:"15. predicted"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The predictions made by the machine learning model."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Values"}),": Typically binary (0 or 1)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Indicates buy (1) or sell/hold (0) signals based on the model's predictions."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"16-strategy_return",children:"16. strategy_return"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The return of the trading strategy based on the model's predictions."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": return * predicted.shift(1)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Reflects the performance of the strategy for each period, considering the previous period's prediction."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"17-cumulative_strategy_return",children:"17. cumulative_strategy_return"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The cumulative return of the trading strategy over time."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": (1 + strategy_return).cumprod() - 1"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Shows the running total of the strategy's performance, indicating overall gains or losses since the start."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"18-cumulative_market_return",children:"18. cumulative_market_return"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The cumulative return of the market over time."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": (1 + return).cumprod() - 1"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Indicates the overall market performance for comparison with the strategy."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"19-strategy_portfolio_value",children:"19. strategy_portfolio_value"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The value of the portfolio following the trading strategy."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": Initial Investment * (1 + cumulative_strategy_return)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Shows the monetary value of the portfolio over time when following the strategy."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"20-market_portfolio_value",children:"20. market_portfolio_value"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The value of the portfolio if it is simply invested in the market without trading."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": Initial Investment * (1 + cumulative_market_return)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Indicates the monetary value of the portfolio over time when passively invested in the market."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"21-strategy_crypto_amount",children:"21. strategy_crypto_amount"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The amount of the base cryptocurrency (e.g., BTC) held in the strategy portfolio."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": strategy_portfolio_value / close"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Shows the equivalent amount of cryptocurrency held based on the strategy portfolio's value."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"22-market_crypto_amount",children:"22. market_crypto_amount"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Definition"}),": The amount of the base cryptocurrency (e.g., BTC) held in the market portfolio."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Calculation"}),": market_portfolio_value / close"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Indicates the equivalent amount of cryptocurrency held based on the market portfolio's value."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},3872:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/main-menu-c5e71a603c344bb3027573df0edb85ba.png"},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var t=i(6540);const s={},r=t.createContext(s);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);